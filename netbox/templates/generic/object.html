{% extends 'layout.html' %}
{% load buttons %}
{% load custom_links %}
{% load helpers %}
{% load perms %}
{% load plugins %}


{% block title %}<a href="{{ object.get_absolute_url }}">{{ object }}</a>{% endblock %}

{% block breadcrumb_main %}
<nav class="breadcrumb-container" aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/">Home</a></li>
    {% block breadcrumbs %}{%endblock%}
  </ol>
</nav>
{% endblock %}

{% block controls %}
{% plugin_buttons object %}
<div class="container mb-2 mx-0">
  <div class="d-flex flex-wrap justify-content-end">
  {% block extra_controls %}{% endblock %}
  {% if request.user|can_add:object %}
    {% clone_button object %}
  {% endif %}
  {% if request.user|can_change:object %}
    {% edit_button object %}
  {% endif %}
  {% if request.user|can_delete:object %}
    {% delete_button object %}
  {% endif %}
  </div>
</div>
{% endblock %}

{% block tabs %}
<ul class="nav nav-tabs mb-3">
  {% block tab_items %}
  <li class="nav-item" role="presentation">
    <a class="nav-link{% if not active_tab %} active{% endif %}" href="{{ object.get_absolute_url }}">{{ object|meta:"verbose_name"|bettertitle }}</a>
  </li>
  {% endblock %}
  {% if perms.extras.view_journalentry %}
    {% with journal_viewname=object|viewname:'journal' %}
    {% url journal_viewname pk=object.pk as journal_url %}
    {% if journal_url %}
      <li role="presentation" class="nav-item">
        <a href="{{ journal_url }}" class="nav-link{% if active_tab == 'journal'%} active{% endif %}">Journal</a>
      </li>
    {% endif %}
    {% endwith %}
  {% endif %}
  {% if perms.extras.view_objectchange %}
    {% with changelog_viewname=object|viewname:'changelog' %}
    {% url changelog_viewname pk=object.pk as changelog_url %}
      <li role="presentation" class="nav-item">
          <a href="{{ changelog_url }}" class="nav-link{% if active_tab == 'changelog'%} active{% endif %}">Change Log</a>
      </li>
    {% endwith %}
  {% endif %}
</ul>
{% endblock %}

{% block content %}{% endblock %}
{% block components %}{% endblock %}

{% block header %}
  <div class="row noprint">
    <div class="col-sm-8 col-md-9">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">Home</a></li>
        </ol>
      </nav>
    </div>
    <div class="col-sm-4 col-md-3">
      {# TODO: Provide absolute search URL #}
      <form action="../" method="get">
        <div class="input-group">
          <input type="text" name="q" class="form-control" placeholder="Search" />
          <span class="input-group-btn">
            <button type="submit" class="btn btn-primary">
              <span class="mdi mdi-magnify" aria-hidden="true"></span>
            </button>
          </span>
        </div>
      </form>
    </div>
  </div>
  {% comment %} <div class="pull-right noprint">
    {% plugin_buttons object %}
    {% block buttons %}
      {% if request.user|can_add:object %}
        {% clone_button object %}
      {% endif %}
      {% if request.user|can_change:object %}
        {% edit_button object %}
      {% endif %}
      {% if request.user|can_delete:object %}
        {% delete_button object %}
      {% endif %}
    {% endblock %}
  </div>
  <h1>{% block title %}{{ object }}{% endblock %}</h1>
  {% endcomment %}
  {% include 'inc/created_updated.html' %}
  <div class="float-end noprint">
    {% block tab_buttons %}
      {% custom_links object %}
    {% endblock %}
  </div>
  
{% endblock %}
